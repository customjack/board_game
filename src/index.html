<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Board Game</title>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script> <!-- PeerJS CDN -->
</head>

<body>
    <h1>Board Game</h1>

    <!-- Gear Icon for opening Personal Settings -->
    <button id="gearButton" class="button gear-button">
        <img src="assets/images/gear-icon.png" alt="Settings" width="30" height="30">
    </button>


    <!-- Modal Popup for Personal Settings (Sidebar Layout) -->
    <div id="settingsModal" class="settings-modal-backdrop" style="display: none;">
        <div class="settings-modal-container">
            <!-- Header -->
            <div class="settings-modal-header">
                <h2>Personal Settings</h2>
                <div class="settings-modal-header-buttons">
                    <button id="closeSettingsButton" class="button button-secondary settings-modal-close">×</button>
                </div>
            </div>

            <!-- Body (Sidebar + Content) -->
            <div class="settings-modal-body">
                <!-- Left Sidebar Navigation -->
                <div class="settings-modal-sidebar" id="personalSettingsSidebar">
                    <!-- Navigation items will be populated by JS -->
                </div>

                <!-- Right Content Area -->
                <div class="settings-modal-content" id="personalSettingsContent">
                    <!-- Content will be populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Home Page with Host and Join buttons -->
    <div id="homePage">
        <button id="hostButton" class="button">Host Game</button>
        <button id="joinButton" class="button">Join Game</button>
    </div>

    <!-- Host Game Page -->
    <div id="hostPage" style="display: none;">
        <h2>Host Game</h2>
        <div class="input-group">
            <div class="input-field">
                <label for="hostNameInput">Enter Your Name:</label>
                <input class="input" id="hostNameInput" type="text" placeholder="Your Name">
            </div>
        </div>
        <div class="button-row">
            <button id="hostBackButton" class="button button-secondary">Back</button>
            <button id="startHostButton" class="button">Start Game</button>
        </div>
    </div>

    <!-- Join Game Page -->
    <div id="joinPage" style="display: none;">
        <h2>Join Game</h2>
        <div class="input-group">
            <div class="input-field">
                <label for="joinNameInput">Enter Your Name:</label>
                <input class="input" id="joinNameInput" type="text" placeholder="Your Name">
            </div>
            <div class="input-field">
                <label for="joinCodeInput">Enter Game Code:</label>
                <input class="input" id="joinCodeInput" type="text" placeholder="Game Code">
            </div>
        </div>
        <div class="button-row">
            <button id="joinBackButton" class="button button-secondary">Back</button>
            <button id="startJoinButton" class="button">Join Game</button>
        </div>
    </div>

    <!-- Loading Page -->
    <div id="loadingPage" style="display: none;">
        <div class="spinner"></div>
        <p>Setting up the game... Please wait.</p>
    </div>


    <!-- Lobby Page -->
    <div id="lobbyPage" style="display: none;">
        <h2>Lobby</h2>

        <!-- Invite Code and Copy Button -->
        <div class="invite-code-container">
            <div class="box-container invite-code-box">
                <span id="inviteCode" class="invite-code-box-content">ABCD-1234</span>
                <button id="copyInviteCodeButton" class="button-invite-code button " title="Copy Invite Code">
                    Copy Invite Code
                </button>
            </div>
            <span id="copyMessage" class="toast-message" style="display: none;">Copied!</span>
        </div>

        <!-- Lobby Layout: Split into two sections -->
        <div id="lobbyContainer" class="lobby-container">
            <!-- Left Section: Lobby Controls -->
            <div id="lobbyControlsSection" class="lobby-section-left">
                <h3>Lobby Controls</h3>
                <div class="lobby-button-group">
                    <button id="openSettingsButton" class="button button-secondary" style="display: none;">
                        Settings
                    </button>
                    <button id="selectMapButton" class="button button-secondary" style="display: none;">
                        Map Manager
                    </button>
                    <button id="uploadPluginButton" class="button button-secondary" style="display: none;">
                        Plugin Manager
                    </button>
                    <button id="viewPluginListButton" class="button button-secondary" style="display: none;">
                        Plugin List
                    </button>
                    <input type="file" id="pluginFileInput" accept=".js" style="display: none;">
                    <button id="startGameButton" class="button button-primary" style="display: none;">
                        Start Game
                    </button>
                    <button id="closeGameButton" class="button button-danger" style="display: none;">
                        Close Game
                    </button>
                    <button id="leaveGameButton" class="button button-danger" style="display: none;">
                        Leave Game
                    </button>
                </div>
            </div>

            <!-- Right Section: Player List -->
            <div id="lobbyPlayerListSection" class="lobby-section-right">
                <h3>Connected Players</h3>
                <ul id="lobbyPlayerList"></ul>
                <!-- Green "+" button to add players -->
                <div class="add-player-container" id="addPlayerButtonContainer" style="display: none;">
                    <button id="addPlayerButton" class="button" style="display: none;">Add Another Local Player</button>
                </div>
            </div>
        </div>

        <!-- Lobby Page Board Preview Section -->
        <div id="boardPreviewSection" style="margin-top: 30px;">
            <h3>Board Preview</h3>
            <div id="lobbyBoardContainer" class="board-container">
                <div class="board-wrapper">
                    <div class="board-content" id="lobbyBoardContent">
                        <!-- Board spaces and pieces for the lobby will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Page Board Section -->
    <div id="gamePage" style="display: none;">

        <div id="gameContainer" class="game-container">
            <div id="gameSidebar" class="game-sidebar">
                <!-- Game Paused Message Container -->
                <div id="pausedMessageContainer"></div>

                <!-- Remaining Moves Section -->
                <div id="remainingMovesContainer" class="box-container info-box" style="display: none;">
                    <h4>Remaining Moves:</h4>
                    <span id="remainingMovesCount">0</span>
                </div>

                <!-- Timer Container -->
                <div class="timer-container">
                    <div class="timer-cap"></div>
                    <div class="timer-body">
                        <!-- Circle 1: Container (background ring) -->
                        <div class="timer-container-ring"></div>

                        <!-- Circle 2: Progress (animated ring) -->
                        <div class="timer-progress-ring"></div>

                        <!-- Circle 3: Block (static ring on top of progress) -->
                        <div class="timer-block-ring"></div>

                        <!-- Timer Text -->
                        <span class="timer-text">30s</span>
                    </div>
                </div>

                <!-- Roll Button -->
                <button id="rollButton" class="button button-roll">Roll Dice</button>

                <!-- Sidebar for player list -->
                <ul id="gamePlayerList"></ul>

                <!-- Action Buttons Group -->
                <div class="sidebar-button-group">
                    <button id="openGameLogButton" class="button button-secondary">Game Log</button>
                    <button id="openPluginListButton" class="button button-secondary">Plugin List</button>
                </div>

            </div>

            <div id="gameBoardContainer" class="board-container">
                <div class="board-wrapper">
                    <div class="board-content" id="gameBoardContent">
                        <!-- Board spaces and pieces for the game will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="gameLogPopup" class="game-log-popup">
        <div class="game-log-popup-header" id="gameLogPopupHeader">
            <h3>Game Log</h3>
            <button id="closeGameLogButton" class="button button-secondary"
                style="padding: 0.25rem 0.5rem; font-size: 0.8rem;">✕</button>
        </div>
        <div id="gameLogContainer" class="game-log-popup-content"></div>
    </div>

    <!-- Game prompt Modal Structure -->
    <div id="gamePromptModal" class="modal">
        <div class="modal-content">
            <div id="gamePromptModalCountdown" class="modal-countdown"></div>
            <!-- Modal Message -->
            <div id="gamePromptModalMessage" style="font-size: 16px; text-align: center;"></div>

            <!-- Dismiss Button with danger class -->
            <button id="gamePromptModalDismissButton" class="button button-danger">
                Dismiss
            </button>
        </div>
    </div>



    </div>
</body>

</html>