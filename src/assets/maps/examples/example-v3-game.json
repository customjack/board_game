{
  "$schema": "https://boardgame.example.com/schemas/game-v3.json",
  "version": "3.0.0",
  "type": "game",

  "metadata": {
    "name": "Example Party Game v3",
    "author": "Jack Carlton",
    "description": "Example game demonstrating the v3.0 format with engine configuration",
    "created": "2025-01-13T00:00:00Z",
    "modified": "2025-01-13T00:00:00Z",
    "tags": ["party", "drinking", "example", "v3"],
    "thumbnail": null
  },

  "requirements": {
    "plugins": [
      {
        "id": "core",
        "version": "^1.0.0",
        "source": "builtin",
        "description": "Core game functionality (actions, triggers, effects)"
      }
    ],
    "minPlayers": 2,
    "maxPlayers": 8
  },

  "engine": {
    "type": "turn-based",
    "config": {
      "phaseStateMachine": {
        "type": "default"
      },
      "turnManager": {
        "type": "default"
      },
      "eventProcessor": {
        "type": "default"
      },
      "turnTimer": true,
      "autoRoll": false,
      "allowMultiplePiecesPerPlayer": false
    }
  },

  "ui": {
    "layout": "standard-board",
    "components": [
      {
        "id": "rollButton",
        "enabled": true,
        "position": {
          "bottom": 20,
          "centerX": true
        },
        "config": {
          "animation": "dice-roll",
          "label": "Roll Dice",
          "hotkey": "space"
        }
      },
      {
        "id": "timer",
        "enabled": true,
        "position": {
          "top": 20,
          "right": 20
        },
        "config": {
          "animation": "timer",
          "showProgress": true
        }
      },
      {
        "id": "remainingMoves",
        "enabled": true,
        "position": {
          "top": 20,
          "left": 20
        },
        "config": {
          "showLabel": true
        }
      },
      {
        "id": "gameLog",
        "enabled": true,
        "position": {
          "bottom": 80,
          "right": 20
        },
        "config": {
          "maxEntries": 50,
          "showTimestamps": false
        }
      },
      {
        "id": "playerList",
        "enabled": true,
        "position": {
          "top": 100,
          "left": 20
        },
        "config": {
          "showStats": true
        }
      }
    ],
    "theme": {
      "primaryColor": "#4CAF50",
      "secondaryColor": "#2196F3",
      "backgroundColor": "#FAFAFA",
      "textColor": "#333333",
      "boardStyle": "modern"
    }
  },

  "rules": {
    "startingPositions": {
      "mode": "single",
      "spaceIds": ["1"]
    },
    "winCondition": {
      "type": "reach-end",
      "config": {
        "endSpaceIds": ["11"]
      }
    },
    "turnOrder": "sequential",
    "diceRolling": {
      "enabled": true,
      "diceCount": 1,
      "diceSides": 6
    }
  },

  "board": {
    "topology": {
      "spaces": [
        {
          "id": "1",
          "name": "Start",
          "type": "start",
          "position": { "x": 300, "y": 300 },
          "visual": {
            "size": 60,
            "color": "#ffcccc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "2", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "2",
          "name": "Take a Drink",
          "type": "action",
          "position": { "x": 400, "y": 300 },
          "visual": {
            "size": 60,
            "color": "#ccffcc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "3", "draw": true }
          ],
          "triggers": [
            {
              "when": {
                "type": "ON_ENTER"
              },
              "action": {
                "type": "PROMPT_ALL_PLAYERS",
                "payload": {
                  "message": "{{CURRENT_PLAYER_NAME}} takes a drink!"
                }
              },
              "priority": "MID"
            }
          ]
        },
        {
          "id": "3",
          "name": "Move Back 2",
          "type": "action",
          "position": { "x": 400, "y": 200 },
          "visual": {
            "size": 60,
            "color": "#ffcccc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "4", "draw": true }
          ],
          "triggers": [
            {
              "when": {
                "type": "ON_LAND"
              },
              "action": {
                "type": "PROMPT_CURRENT_PLAYER",
                "payload": {
                  "message": "You move back 2 spaces!"
                }
              },
              "priority": "MID"
            },
            {
              "when": {
                "type": "ON_LAND"
              },
              "action": {
                "type": "DISPLACE_PLAYER",
                "payload": {
                  "steps": -2
                }
              },
              "priority": "MID"
            }
          ]
        },
        {
          "id": "4",
          "name": "Choice Point",
          "type": "action",
          "position": { "x": 300, "y": 200 },
          "visual": {
            "size": 60,
            "color": "#ccccff",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "5", "draw": true },
            { "targetId": "6", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "5",
          "name": "Safe Path",
          "type": "normal",
          "position": { "x": 200, "y": 200 },
          "visual": {
            "size": 60,
            "color": "#ddffdd",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "7", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "6",
          "name": "Risky Path",
          "type": "action",
          "position": { "x": 200, "y": 300 },
          "visual": {
            "size": 60,
            "color": "#ffdddd",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "7", "draw": true }
          ],
          "triggers": [
            {
              "when": {
                "type": "ON_ENTER"
              },
              "action": {
                "type": "PROMPT_CURRENT_PLAYER",
                "payload": {
                  "message": "Risky choice! Skip your next turn."
                }
              },
              "priority": "MID"
            },
            {
              "when": {
                "type": "ON_LAND"
              },
              "action": {
                "type": "APPLY_EFFECT",
                "payload": {
                  "effect": {
                    "type": "SkipTurnEffect",
                    "config": {
                      "id": "risky_skip",
                      "duration": 1
                    }
                  }
                }
              },
              "priority": "MID"
            }
          ]
        },
        {
          "id": "7",
          "name": "Rest Stop",
          "type": "normal",
          "position": { "x": 200, "y": 400 },
          "visual": {
            "size": 60,
            "color": "#ffffcc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "8", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "8",
          "name": "Power Up",
          "type": "action",
          "position": { "x": 300, "y": 400 },
          "visual": {
            "size": 60,
            "color": "#ccffcc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "9", "draw": true }
          ],
          "triggers": [
            {
              "when": {
                "type": "ON_ENTER"
              },
              "action": {
                "type": "PROMPT_CURRENT_PLAYER",
                "payload": {
                  "message": "Power up! Move forward 3 spaces!"
                }
              },
              "priority": "MID"
            },
            {
              "when": {
                "type": "ON_ENTER"
              },
              "action": {
                "type": "DISPLACE_PLAYER",
                "payload": {
                  "steps": 3
                }
              },
              "priority": "MID"
            }
          ]
        },
        {
          "id": "9",
          "name": "Almost There",
          "type": "normal",
          "position": { "x": 400, "y": 400 },
          "visual": {
            "size": 60,
            "color": "#ffccff",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "10", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "10",
          "name": "Last Stretch",
          "type": "normal",
          "position": { "x": 500, "y": 400 },
          "visual": {
            "size": 60,
            "color": "#ccffff",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [
            { "targetId": "11", "draw": true }
          ],
          "triggers": []
        },
        {
          "id": "11",
          "name": "Finish",
          "type": "end",
          "position": { "x": 600, "y": 400 },
          "visual": {
            "size": 60,
            "color": "#ffffcc",
            "textColor": "#000000",
            "font": "12px Arial",
            "textAlign": "center",
            "textBaseline": "middle"
          },
          "connections": [],
          "triggers": [
            {
              "when": {
                "type": "ON_LAND"
              },
              "action": {
                "type": "SET_PLAYER_STATE",
                "payload": {
                  "state": "COMPLETED_GAME"
                }
              },
              "priority": "MID"
            },
            {
              "when": {
                "type": "ON_LAND"
              },
              "action": {
                "type": "PROMPT_CURRENT_PLAYER",
                "payload": {
                  "message": "Congratulations! You've finished the game!"
                }
              },
              "priority": "MID"
            }
          ]
        }
      ]
    },
    "rendering": {
      "canvasSize": {
        "width": 900,
        "height": 700
      },
      "backgroundColor": "#FAFAFA",
      "defaultSpaceSize": 60,
      "connectionColor": "#000000",
      "connectionThickness": 2,
      "arrowColor": "#000000",
      "arrowSize": 10
    }
  }
}
